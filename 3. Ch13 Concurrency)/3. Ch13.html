<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> 3. Ch13 (Concurrency) </title>
</head>

<body>
    <h1> 3. Ch13 : Concurrency </h1>
    <hr>


    <!--  
//INTRODUCING CONCURRENCY
//CALLBACKS
//NOTES : Callbacks are functions that take another function as a parameter i.e. function calling a function
//EXAMPLE 1:
function doSomething(callback) {
    console.log(" 'doSomething function : ' ")
callback();
}

function sayHi() {
    console.log("Say Hi function !");
}

sayHi();
doSomething(sayHi);




//EXAMPLE 2:
function judge(grade) {
switch (true) {
case grade === "A":
console.log("You got an " + grade + ": Amazing! Keep up the EXCELLENT work ethic! {^_^}");
break;
case grade === "B":
console.log("You got a " + grade + ": Well done. Next time, you can get an A ()");
break;
case grade === "C":
console.log("You got a " + grade + ": Alright. You just made it! ");
break;
case grade === "D":
console.log("You got a " + grade + ": No worries!! Click on the link if you feel you need a tutor (^_^) ");
break;
default:
console.log("An " + grade + ": No worries!! Click on the link provied to get in touch with a friendly & qualified tutor [^_^] ");
}
}

function getGrade(score, callback) {
let grade;
switch (true) {
case score >= 90:
grade = "A+";
break;
case score >= 80:
console.log(score);
grade = "A";
break;
case score >= 70:
grade = "B";
break;
case score >= 60:
grade = "C";
break;
default:
grade = "D || E || F";
}

callback(grade);
}

getGrade(90, judge);
getGrade(80, judge);
getGrade(70, judge);
getGrade(60, judge);
getGrade(30, judge);





//EXAMPLE 3:
setInterval(encourage, 500);
function encourage() {
console.log("You're doing great, keep going!");
}





/*   PRACTICE EXERCISE 13.1   */
function greet(fullName){
console.log(`Welcome, ${fullName[0]} ${fullName[1]}`)
}
function processCall(userFullName, callback){
const fullName = user.split(" ");
callback(fullName);
}
processCallback("Bhabha September", greet);




//PROMISES
//EXAMPLE 1:
let promise = new Promise(function (resolve, reject) {
// do something that might take a while
// let's just set x instead for this example
let x = 20;
if (x > 10) {
resolve(x); // on success
} else {
reject("Too low"); // on error
}
});

promise.then(
function (value) {
console.log("Success:", value);
},
function (error) {
console.log("Error:", error);
}
);



//EXAMPLE 2:
const promise = new Promise((resolve, reject) => {
resolve("success!");
})
.then(value => {
console.log(value);
return "we";
})
.then(value => {
console.log(value);
return "can";
})
.then(value => {
console.log(value);
return "chain";
})
.then(value => {
console.log(value);
return "promises";
})
.then(value => {
console.log(value);
})
.catch(value => {
console.log(value);
})




//EXAMPLE 3:
const promise = new Promise((resolve, reject) => {
reject("oops... ");
})
.then(value => {
console.log(value);
return "we";
})
.then(value => {
console.log(value);
return "can";
})
.then(value => {
console.log(value);
return "chain";
})
.then(value => {
console.log(value);
return "promises";
})
.then(value => {
console.log(value);
})
.catch(value => {
console.log(value);
})





/*    PRACTICE EXERCISE 13.2    */

const myPromise = new Promise((resolve, reject) => {
resolve("Start Counting");
});
function counter(val){
console.log(val);
}
myPromise
.then(value => {counter(value); return "one"})
.then(value => {counter(value); return "two"})
.then(value => {counter(value); return "three"})
.then(value => {counter(value);});




//ASYNC & AWAIT
//EXAMPLE 1: 
function saySomething(x) {
return new Promise(resolve => {
setTimeout(() => {
resolve("something" + x);
}, 2000);
});
}
async function talk(x) {
const words = await saySomething(x);
console.log(words);
}
talk(2);
talk(4);
talk(8);






/*    PRACTICE EXERCISE 13.3    */
let cnt = 0;
function outputTime(val) {
return new Promise(resolve => {
setTimeout(() => {
cnt++;
resolve(`x value ${val} counter:${cnt}`);
}, 1000);
});
}
async function aCall(val) {
console.log(`ready ${val} counter:${cnt}`);
const res = await outputTime(val);
console.log(res);
}
for (let x = 1; x < 4; x++) {
aCall(x);
}




//EVENT LOOP
//CALL STAXK & CALLBACK QUEUE
//EXAMPLE 1:
console.log("Hi there");
add(4,5);
function add(x, y) {
return x + y;
}


//EXAMPLE 2: 
console.log("Hi there");
setTimeout(() => console.log("Sorry I'm late"), 1000);
console.log(add(4, 5));
function add(x, y) {
return x + y;
}



//EXAMPLE 3:
console.log("Hi there");
setTimeout(() => console.log("Sorry I'm late"), 0);
console.log(add(4,5));
function add(x, y) {
return x + y;
}







                                        


 //CHAPTER PROJECT
//PASSWORD CHECKER
    
const allowed = ["1234", "pass", "apple"];
function passwordChecker(pass) {
return allowed.includes(pass);
}
function login(password) {
return new Promise((resolve, reject) => {
if (passwordChecker(password)) {
resolve({
status: true
});
} else {
reject({
status: false
});
}
});
}
function checker(pass) {
login(pass)
.then(token => {
console.log("Approve:");
console.log(token);
})
.catch(value => {
console.log("Reject:");
console.log(value);
})
}
checker("1234");
checker("wrong");





//SELF-CHECK QUIZ
//1.



    -->


   


    <script> 



setInterval(encourage, 500);
function encourage() {
console.log("You're doing great, keep going!");
}




    </script>

</body>
</html>